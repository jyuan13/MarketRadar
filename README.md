# MarketRadar - 全球金融市场数据聚合雷达

MarketRadar 是一个自动化的金融数据聚合工具，旨在为投资者提供全方位的市场快照。它集成了全球主要指数、关键汇率、国债收益率以及宏观经济指标，并进行技术分析（均线计算），最终生成一份结构化的 JSON 数据报告并通过邮件发送。

## 🎯 核心功能

### 1. 全球市场 K线与技术分析
自动抓取全球主要投资标的的 **K线数据（OHLCV）**，并计算 **5日、10日、20日、60日、120日、250日（年线）** 移动平均线。

* **全球指数**: 纳斯达克 (.IXIC), 标普500 (.INX), 恒生指数 (HSI), 恒生科技指数 (HSTECH), 越南胡志明指数 (VNINDEX)。
* **大宗商品**: 黄金 (COMEX GC), 白银 (COMEX SI), 铜 (COMEX HG), 上海金 (主力合约)。
* **核心个股**:
    * **美股七巨头**: Apple, Microsoft, Nvidia, Google, Amazon, Meta, Tesla。
    * **港股科技**: 腾讯, 阿里, 美团, 小米, 快手等 Top 20 成分股。
    * **港股医药**: 信达生物, 百济神州, 药明康德等创新药龙头。
    * **新兴市场**: 越南股市 Top 10 权重股 (VinGroup, 移动世界, 和发集团等)。

### 2. 宏观经济指标 (Macro Data)
利用自动化浏览器技术（Selenium）抓取关键的宏观经济数据，支持历史数据回溯。

* **中国**: CPI, PPI, PMI (制造业/非制造业), 货币供应量 (M1/M2), 贷款市场报价利率 (LPR), 南向资金流向。
* **美国**: 非农就业数据 (Non-Farm), 失业率, ISM 制造业/非制造业 PMI, 利率决议 (Fed Rate), 核心零售销售。
* **日本**: 央行利率决议。

### 3. 国债收益率与汇率 (Bonds & FX)
实时监控主要经济体的无风险利率和货币波动，作为大类资产配置的锚点。

* **国债收益率**:
    * **美国**: 13周, 5年, 10年, 30年。
    * **中国**: 1年, 2年, 10年, 30年。
    * **日本**: 2年, 10年, 30年 (从 Investing.com 实时抓取)。
* **外汇与波动率**:
    * **VIX 恐慌指数**: 衡量市场风险偏好。
    * **汇率**: 美元/人民币 (USD/CNY), 美元/日元 (USD/JPY), 美元/越南盾 (USD/VND)。

### 4. 数据清洗与报告生成
* **自动容错**: 内置 AkShare, YFinance, Investing.com, FMP 等多重数据源，具备自动重试和备用源切换机制，确保数据获取的高可用性。
* **数据标准化**: 将不同来源的数据统一清洗为标准格式（日期, 开/高/低/收, 成交量）。
* **报告输出**:
    * `MarketRadar_Report.json`: 包含所有元数据、技术指标和宏观数据的全量报告。
    * `market_data_status.txt`: 详细的运行状态日志，记录每个数据点的抓取状态（成功/失败/重试）。
* **邮件推送**: 任务完成后自动将报告和日志通过 SSL 加密通道发送至指定邮箱。

## 🏗️ 模块架构

* **`MarketRadar.py`**: 主程序协调器。负责 K 线数据的并发抓取、`utils.py` 均线计算调用、数据组装以及邮件发送。
* **`fetch_data.py`**: 基础数据获取模块。负责 FX（汇率）、VIX、全球国债收益率以及越南指数的特殊处理（爬虫）。
* **`scrape_economy_selenium.py`**: 宏观数据获取模块。使用 Headless Chrome 浏览器模拟用户行为，抓取网页端的宏观经济日历数据。
* **`utils.py`**: 通用工具库。核心功能是 `calculate_ma`，用于对任意时间序列数据进行多周期移动平均线计算。