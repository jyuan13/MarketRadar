# MarketRadar - 全球金融数据自动化雷达

**MarketRadar** 是一个模块化的金融数据采集与整合系统，专为量化分析与市场监控设计。它通过统一的入口整合了宏观经济数据与全球核心资产行情，经过严格的数据清洗与标准化处理，生成结构紧凑的 JSON 报告并自动推送。

## 🚀 核心功能体系

### 1. 多源宏观经济数据采集 (`fetch_data`)
系统内置智能调度逻辑，支持从多个数据源（AkShare, Yahoo Finance, Jin10, 东方财富等）获取关键宏观指标。具备**“离线优先” (Offline-First)** 机制，在存在本地手动维护数据时优先读取，确保核心数据的精准性。

* **市场风向标**：实时监控 VIX 恐慌指数、美元兑人民币/日元/越南盾汇率。
* **中国经济基本面**：
    * 通胀数据：CPI、PPI。
    * 景气指数：制造业 PMI。
    * 货币与利率：LPR、货币供应量 (M0/M1/M2)、国债收益率曲线。
    * 资金流向：南向资金净流入。
* **美国经济引擎**：
    * 就业数据：非农就业人数、失业率。
    * 通胀与消费：CPI、零售销售月率。
    * 景气与政策：ISM 制造业/非制造业 PMI、美联储利率决议、美债收益率。
* **日本市场**：央行利率决议及 10 年期国债收益率。

### 2. 全球市场 K 线数据追踪 (`MarketRadar`)
针对五大核心投资板块，系统采用多线程并发架构，高效抓取 OHLCV（开/高/低/收/量）行情数据：

* **全球核心指数**：纳斯达克、标普 500、恒生指数、恒生科技、上海金、COMEX 黄金/白银/铜、越南 ETF (VNM)。
* **美股七巨头 (Magnificent 7)**：Apple, Microsoft, Google, Amazon, Nvidia, Meta, Tesla。
* **恒生科技权重股**：腾讯、美团、小米、阿里、理想、快手等 Top 20 成分股。
* **港股创新药**：信达生物、百济神州、药明康德等核心标的。
* **新兴市场 (越南)**：FPT、Vingroup 等越南胡志明指数前十大权重股。

### 3. 高健壮性数据架构
为确保在网络波动或数据源不稳定时系统的可靠性，工程集成了多重防护机制：

* **责任链故障转移**：K 线抓取采用多级备选策略，主源 (AkShare) 失败时自动无缝切换至备用源 (YFinance / FMP)。
* **底层防卡死 (Monkey Patch)**：通过底层代码注入，强制接管所有 Requests 请求的超时控制，防止因 SSL 握手或 DNS 解析导致的进程永久挂起。
* **并发加速**：内置 `ThreadPoolExecutor` 线程池，大幅缩短多标的数据采集时间。
* **智能反爬**：请求间引入随机休眠机制，降低 IP 被目标服务器封锁的风险。

### 4. 数据清洗与报告输出 (`main`)
系统在数据整合阶段执行严格的清洗逻辑，确保输出数据的标准化与可用性：

* **全局数值清洗**：递归遍历所有数据节点，将所有浮点数强制保留 **两位小数**，并将 `NaN`/`Inf` 等非法数值标准化为 `null`。
* **紧凑型 JSON 格式**：输出的 `MarketRadar_Report.json` 采用定制化序列化器，强制将列表内的字典对象保持单行显示，在保持文件结构清晰的同时大幅压缩行数，便于阅读与传输。
* **自动化通知**：任务链路完成后，自动通过 SMTP_SSL 安全协议调用邮件服务，将生成的日报文件作为附件推送至指定邮箱。

---
*Generated by MarketRadar Automation System*